// базовые подключения
@import "fonts";
@import "vars";
@import "./helpers/grid-bootstrap";
@import "settings";

// подключения компонентов страницы
@import "./components/header";
@import "./components/footer";

.main {
	position: relative;
	flex: 1;
	min-width: 375px;
	overflow: hidden;
}

@media (max-width: 1379.98px) {
	.main {
		padding-top: 16px;
	}
}

.become-auth-banner {
	position: relative;
	min-width: 100%;
	padding: 12px 25% 12px 16px;
	border: 1px solid var(--green-color);
	border-radius: 4px;
	box-shadow: 0 4px 12px rgba(113, 207, 113, 0.16);
	background-color: var(--white-color);
	font-size: 12px;
	line-height: 17px;
	text-align: left;

	&::before {
		content: "";
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		background: url("../img/discount-green.svg#discount-green") no-repeat center right/contain;
	}
}
@media (min-width: 992px) {
	.become-auth-banner {}
}
@media (max-width: 991.98px) {
	.become-auth-banner {}
}

.fancybox {
	&__html5video {
		outline: none;
	}
}

.search-results-title {
	font-weight: 400;
}

@media (max-width: 991.98px) {
	.amp-section {
		margin: 0 -16px;
		border-bottom: 8px solid var(--gray5-color);

		&-container {
			padding: 0 16px 16px;
		}
	}
}

.extra-search {
	display: flex;
	align-items: flex-start;

	&__title {
		color: var(--text-secondary);
		white-space: nowrap;
	}
	& .tag-bar {
		.btn {
			font-weight: 400;
			font-size: 13px;
			letter-spacing: 0;
			text-transform: unset;
		}
	}
}
@media (min-width: 992px) {
	.extra-search {
		gap: 12px;
		padding-bottom: 24px;

		&__title {
			display: flex;
			align-items: center;
			min-height: 32px;
		}
	}
}
@media (max-width: 991.98px) {
	.extra-search {
		flex-direction: column;
		gap: 8px;
		padding-bottom: 16px;
	}
}

.catalog {
	/*&.catalog-top-level {}*/
	/*&.catalog-category {
		.catalog-sidebar__top {}
		.catalog-sidebar__filter {}
		.catalog-content__top {}
		.catalog-content__grid {}
	}*/
}
.catalog-category {
	.catalog-sidebar {
		display: flex;
		flex-direction: column;
		gap: 32px 0;

		&-filter {
			&__selection {
				display: flex;
				flex-direction: column;
				gap: 32px;
			}
			&__options {
				display: flex;
				flex-direction: column;
				gap: 32px;

				&-item {
					display: flex;
					flex-direction: column;
					gap: 16px;
				}
				&-header {
					align-items: center;
					gap: 8px;
					cursor: pointer;

					&.collapse-view-in {
						.icon {
							transform: scale(-1);
						}
					}
				}
				&-content {
					max-height: 0;
					overflow: hidden;
					opacity: 0;

					&.collapse-content-in {
						animation-duration: 0.5s;
						animation-fill-mode: forwards;
						animation-name: collapse-content-in;
						overflow: visible;
						opacity: 1;
						transition: opacity 0.2s ease-out;
					}
					&-item {
						&:not(:last-child) {
							margin-bottom: 16px;
						}
					}
					&-scrolled {
						padding-top: 4px;
						border-top: 1px solid var(--gray5-color);

						.spoiler {
							&-content {
								.catalog-sidebar-filter__list {
									padding-bottom: 6px;
								}
							}
						}
					}
				}
				&-title {
					line-height: 20px;
				}
			}
			&__list {
				display: flex;
				flex-direction: column;

				&--row {
					flex-direction: row;
					flex-wrap: wrap;
				}
			}
			&__item {
				display: flex;

				.custom-checkbox {
					width: 100%;

					&__brand {
						margin-left: auto;
					}
				}
			}
			&__tag {
				background-color: var(--gray5-color);

				&:hover {
					background-color: var(--gray4-color);
					color: var(--text-primary);
				}
				&:checked,
				&.checked {
					background-color: var(--yellow-color);
					color: var(--text-primary);
				}
			}
			&__actions {
				display: flex;
			}
			.spoiler {
				&::before {
					content: none;
				}
			}
		}
	}

	.catalog-content {
		display: flex;
		flex-direction: column;
		gap: 32px 0;

		&__top {
			display: flex;
			width: 100%;
		}
		&-settings {
			&__sort {
				position: relative;

				&-label {
					display: flex;
					overflow: hidden;
					border-radius: 4px;
					background-color: transparent;
					color: var(--text-primary);
					line-height: 16px;
					white-space: nowrap;
					cursor: pointer;
					transition: var(--transition);

					&:hover {
						background-color: var(--gray6-color);
					}
				}
			}
		}
		&__layout {
			.pagination-wrapper {
				min-width: 100%;
				width: 100%;
			}
		}
		&__grid {
			display: flex;
		}
		&__text {
			color: var(--text-secondary);

			.spoiler {
				&[aria-expanded="false"] {
					&::before {
						min-height: 50px;
						height: 50px;
					}
				}
			}
		}
	}
}
@keyframes collapse-content-in {
	99% {
		max-height: 100vh;
	}
	100% {
		max-height: 999999px;
	}
}
@media (min-width: 992px) {
	.catalog-category {
		display: grid;
		grid-template-columns: 288px 1fr;
		grid-template-rows: auto;
		gap: 0 40px;

		.catalog-sidebar {
			&-top {
				display: flex;
				flex-direction: column;
				gap: 32px;
			}
			&-category {
				&,
				&__list {
					display: flex;
					flex-direction: column;
					gap: 12px;
				}
				&__title {
					font-weight: 600;
				}
				&__item {
					display: flex;
					align-items: flex-start;
					gap: 4px;
					color: var(--text-primary);

					&-available {
						color: var(--text-caption);
						font-size: 11px;
						line-height: 1.3;
					}
				}
			}
			&-filter {
				&:not(:first-child) {
					padding-top: 32px;
					border-top: 1px solid var(--gray5-color);
				}

				&__header {
					display: none;
				}
				&__options {
					&-header {
						display: inline-flex;
					}
					&-content {
						&-brand {
							.catalog-sidebar-filter__list {
								gap: 2px;
							}
						}
						&-scrolled {
							.spoiler {
								max-height: 132px;

								&[aria-expanded="true"] {
									.spoiler-content {
										overflow: auto;
										border-bottom: 1px solid var(--gray5-color);

										&::-webkit {
										    &-scrollbar,
										    &-scrollbar-track,
										    &-scrollbar-thumb {
										        min-width: 4px;
										        width: 4px;
										    }
										    &-scrollbar,
										    &-scrollbar-track {
										        background-color: transparent;
										    }
										    &-scrollbar-button {
										        display: none;
										    }
										    &-scrollbar-thumb {
										        border-radius: 2px;
										        background-color: var(--gray4-color);
										    }
										}
									}
								}
								&-content {
									max-height: 334px;
								}
							}
						}
					}
					&-search {
						.input-search-wrapper {
							&::before {
								content: none;
							}
							.input-search {
								padding: 6px 40px 6px 12px;
								border-color: var(--gray6-color);
								background-color: var(--gray6-color);
							}
							.input-search-btn {
								right: 0;
								min-width: 40px;
								width: 40px;
								min-height: 40px;
								height: 40px;
							}

							&.has-data {
								.input-search-btn {
									z-index: -100;
									opacity: 0;
								}
							}
						}
					}
				}
				&__list {
					gap: 8px;

					&--row {
						gap: 4px;
					}
				}
				&__actions {
					flex-direction: column;
					gap: 12px;
				}
			}
		}

		.catalog-content {
			&__top {
				flex-wrap: wrap;
				align-items: center;
				gap: 24px;
			}
			&-settings {
				display: flex;
				justify-content: space-between;
				align-items: center;
				gap: 16px;
				min-width: 100%;
				width: 100%;

				&__sort {
					display: flex;
					align-items: center;
					gap: 16px;

					&-title {
						font-weight: 600;
					}
					&-select {
						display: none;
					}
					&-options {
						display: flex;
						gap: 4px;
					}
					&-label {
						min-height: 32px;
						height: 32px;
						padding: 8px 12px;

						&.active {
							background-color: var(--gray5-color);
						}
					}
				}
				&__view {
					display: flex;
					border: 1px solid var(--gray5-color);
					border-radius: 4px;

					&-item {
						display: flex;
						justify-content: center;
						align-items: center;
						min-width: 36px;
						width: 36px;
						min-height: 36px;
						height: 36px;
						transition: var(--transition);

						&:not(:last-child) {
							border-right: 1px solid var(--gray5-color);
						}
						.icon {
							fill: var(--gray4-color);
						}

						&:hover {
							.icon {
								fill: var(--gray3-color);
							}
						}
						&.active {
							background-color: var(--gray6-color);

							.icon {
								fill: var(--gray1-color);
							}
						}
					}
				}
			}
			&-filter {
				&-spoiler {
					display: none;
				}
				&-selected {
					min-width: 100%;
					width: 100%;
				}
			}
			&__layout {
				.catalog-content__grid {
					&:not(:last-child) {
						margin-bottom: 32px;
					}
				}
			}
			&__grid {
				flex-wrap: wrap;
				gap: 24px 40px;

				.card-product {
					/*flex: 1;*/
					margin-bottom: 24px;

					/* todo
					&:nth-child(4n+1) {
						background-color: red;
						&::before {
							z-index: 1;
							position: absolute;
							bottom: -24px;
							left: 0;
							min-width: 100vw;
							min-height: 1px;
							height: 1px;
							background-color: var(--gray5-color);
						}
					}*/
				}
			}
		}

		&--list,
		&--table {
			.catalog-content__grid {
				flex-direction: column;
			}
		}
	}
}
@media (min-width: 1200px) and (max-width: 1379.98px) {
	.catalog-category {
		.catalog-content {
			&__grid {
				flex-wrap: wrap;
				gap: 24px 40px;

				.card-product {
					/*flex: 1;*/
					margin-bottom: 24px;

					/* todo
					&:nth-child(4n+1) {
						background-color: red;
						&::before {
							z-index: 1;
							position: absolute;
							bottom: -24px;
							left: 0;
							min-width: 100vw;
							min-height: 1px;
							height: 1px;
							background-color: var(--gray5-color);
						}
					}*/
				}
			}
		}
	}
}
@media (max-width: 991.98px) {
	.catalog-category {
		.catalog-sidebar {
			&-top {
				display: none;
			}
			&-filter {
				z-index: 1010;
				position: fixed;
				right: 0;
				bottom: 0;
				left: 0;
				display: flex;
				flex-direction: column;
				gap: 20px;
				padding: 12px 16px 20px;
				overflow: auto;
				background-color: var(--white-color);
				transition: var(--transition);

				&::-webkit {
				    &-scrollbar,
				    &-scrollbar-track,
				    &-scrollbar-thumb {
				        min-width: 4px;
				        width: 4px;
				    }
				    &-scrollbar,
				    &-scrollbar-track {
				        background-color: transparent;
				    }
				    &-scrollbar-button {
				        display: none;
				    }
				    &-scrollbar-thumb {
				        border-radius: 2px;
				        background-color: var(--gray5-color);
				    }
				}
				&:not(.active) {
					top: 100vh;
				}
				&.active {
					top: 0;
				}
				&__header {
					display: flex;
					justify-content: space-between;
					align-items: center;
					gap: 16px;
				}
				&__close {
					display: flex;
				}
				&__options {
					&-header {
						display: flex;
					}
					&-content {
						&-brand {
							.catalog-sidebar-filter__list {
								gap: 6px;
							}
						}
						&-scrolled {
							.spoiler {
								max-height: 148px;

								&-content {
									position: relative;

									&::before {
										content: "";
										z-index: 1;
										position: absolute;
										right: 0;
										bottom: 0;
										left: 0;
										min-height: 1px;
										height: 1px;
										background-color: var(--gray5-color);
									}
								}
							}
						}
					}
				}
				&__list {
					gap: 12px;

					&--row {
						gap: 4px;
					}
				}
				&__actions {
					gap: 8px;

					.btn {
						flex: 1;
					}
				}
			}
		}
		.catalog-content {
			&__top {
				flex-wrap: wrap;
				justify-content: space-between;
				gap: 16px;
			}
			&-settings {
				&__sort {
					&-title {
						display: none;
					}
					&-select {
						display: flex;
						align-items: center;
						gap: 8px;
						min-height: 40px;
						height: 40px;
						padding: 6px 12px;
						border-radius: 4px;
						background-color: var(--gray5-color);
						color: var(--text-primary);
						line-height: 16px;
						transition: var(--transition);

						span,
						.icon {
							pointer-events: none;
						}
						.icon {
							fill: var(--text-secondary);
						}

						&:hover {
							background-color: var(--gray6-color);
						}
					}
					&-options {
						z-index: 100;
						position: absolute;
						width: 100%;
						padding: 4px 0;
						border-radius: 8px;
						box-shadow: 0 12px 32px rgba(128, 129, 133, 0.32);
						background: var(--white-color);

						&:not(.active) {
							display: none;
						}

						.catalog-content-settings__sort-label {
							min-height: 36px;
							height: 36px;
							padding: 10px 16px;
						}
					}
				}
				&__view {
					display: none;
				}
			}
			&-filter {
				&-spoiler {
					display: inline-flex;
					align-items: center;
					gap: 8px;

					&.has-filter {
						.catalog-content-filter-spoiler__view {
							&::before {
								content: "";
								z-index: 1;
								position: absolute;
								top: 1px;
								right: -1px;
								min-width: 8px;
								width: 8px;
								min-height: 8px;
								height: 8px;
								border: 2px solid var(--white-color);
								border-radius: 50%;
								background-color: var(--red-color);
							}
						}
					}
					&__view {
						position: relative;
						display: flex;
						justify-content: center;
						align-items: center;
					}
					span {
						font-weight: 500;
					}
				}
			}
			&__layout {
				.catalog-content__grid {
					&:not(:last-child) {
						margin-bottom: 8px;
					}
				}
				.pagination-more {
					display: none;
				}
			}
			&__grid {
				flex-wrap: wrap;
				gap: 32px 20px;

				.card-product {

				}
			}
		}
	}
}

//////
/*
.catalog {
	&.catalog-top-level {}
	/*&.catalog-category {
		.catalog-sidebar-top {}
		.catalog-sidebar-filter {}
		.catalog-content-top {}
		.catalog-content-grid {}
	}* /


	.catalog-sidebar-top {
		outline: 1px solid red;
	}
	.catalog-sidebar-filter {
		outline: 1px solid blue;
	}
	.catalog-content-top {
		outline: 1px solid green;
	}
	.catalog-content-grid {
		outline: 1px solid yellow;
	}


	.catalog-content-grid {
		display: flex;
	}
}
@media (min-width: 992px) {
	.catalog {
		.catalog-content-grid {
			flex-wrap: wrap;
			gap: 24px 40px;

			.card-product {
				flex: 1;
				margin-bottom: 24px;
			}
		}
	}

	.catalog-category {
		display: grid;
		grid-template-columns: 288px 1fr;
		grid-template-rows: repeat(3, auto);
		gap: 0 40px;

		.catalog-sidebar-top {
			order: 1;
			grid-column: 1/2;
			grid-row-start: 1;
		}
		.catalog-sidebar-filter {
			order: 2;
			grid-column: 1/2;
		}
		.catalog-content-top {
			order: 3;
			grid-column: 2/3;
			grid-row-start: 1;
		}
		.catalog-content-grid {
			order: 4;
			grid-column: 2/3;
			flex-wrap: wrap;
			gap: 24px 40px;
		}

		&--list,
		&--table {
			.catalog-content-grid {
				flex-direction: column;
			}
		}
	}
}
@media (max-width: 991.98px) {
	.catalog-category {
		.catalog-content-grid {
			flex-wrap: wrap;
			justify-content: space-between;
			gap: 32px 16px;

			.card-product {
				flex: 1;
			}
		}
	}
}
*/
//////

/*
.catalog {
	&.catalog-top-level {}
	/ *&.catalog-category {
		.catalog-sidebar {}
		.catalog-content-header {}
		.catalog-content {}
	}* /

	&-sidebar {
		outline: 1px solid red;

		&-sortby {}
	}

	&-content {
		&-header {
			outline: 1px solid blue;
		}
	}

	&-grid {
		display: flex;
	}
}
@media (min-width: 992px) {
	.catalog {
		&.catalog-category {
			display: grid;
			grid-template-columns: 288px auto;
			grid-template-rows: repeat(10, auto);
			gap: 0 40px;

			.catalog-sidebar {
				order: 1;
				grid-column: 1/2;
				grid-row: 1/10;
			}
			.catalog-content-header {
				order: 5;
				grid-column: 2/3;
				grid-row: 1/2;
			}
			.catalog-content {
				order: 10;
				grid-column: 2/3;
			}
		}

		&-sidebar {
			&-sortby {
				&-fake {
					overflow: hidden;
					/ *opacity: 0;* /
				}
			}
		}

		&-content {
			&-header {

			}
		}

		&-grid {
			&.catalog-grid--grid {
				flex-wrap: wrap;
				gap: 24px 40px;

				.card-product {
					flex: 1;
					margin-bottom: 24px;

					/ * todo
					&:nth-child(4n+1) {
						background-color: red;
						&::before {
							z-index: 1;
							position: absolute;
							bottom: -24px;
							left: 0;
							min-width: 100vw;
							min-height: 1px;
							height: 1px;
							background-color: var(--gray5-color);
						}
					}* /
				}
			}
			&.catalog-grid--list,
			&.catalog-grid--table {
				flex-direction: column;
			}
		}
	}
}
@media (max-width: 991.98px) {
	.catalog {
		&.catalog-category {


			.catalog-sidebar {
				/ *order: 1;
				grid-column: 1/2;
				grid-row: 1/10;* /
			}
			.catalog-content-header {
				/ *order: 5;
				grid-column: 2/3;
				grid-row: 1/2;* /
			}
			.catalog-content {
				/ *order: 10;
				grid-column: 2/3;* /
			}
		}

		&-sidebar {
			&-sortby {
				&-fake {
					display: none;
				}
			}
		}

		&-content {
			&-header {

			}
		}

		&-grid {
			flex-wrap: wrap;
			justify-content: space-between;
			gap: 32px 16px;

			.card-product {
				flex: 1;
			}
		}
	}
}
*/